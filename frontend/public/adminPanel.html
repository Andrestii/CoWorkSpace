<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pannello Admin - CoWorkSpace</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="icon" href="favicon.ico">

  <!-- Styles -->
  <link href="css/pagine/index.css" rel="stylesheet" />
  <link href="css/pagine/profilo.css" rel="stylesheet" />
  <link href="css/pagine/adminPanel.css" rel="stylesheet" />
</head>

<body>

  <!-- Navbar -->
  <div id="navbar-placeholder"></div>

  <!-- Admin Container -->
  <div class="profile-container container py-5" id="admin-container">
    <div class="profile-header mb-5 d-flex justify-content-between align-items-center">
      <div>
        <h1 class="mb-2">Pannello Amministrazione</h1>
        <p class="text-muted">Controllo di utenti, sedi, spazi e prenotazioni</p>
      </div>
      <a class="btn btn-outline-dark" id="go-to-site" href="index.html">
        <i class="fa-solid fa-globe me-2"></i>Vai al sito
      </a>
    </div>

    <div class="row g-4">
      <!-- Sidebar -->
      <aside class="col-lg-3">
        <div class="profile-sidebar p-3 rounded shadow-sm">
          <div class="user-info text-center mb-4">
            <div class="avatar-container mb-3 position-relative">
              <img src="https://via.placeholder.com/120" alt="Avatar" class="rounded-circle user-avatar"
                id="admin-avatar">
            </div>
            <h5 id="admin-name">Admin</h5>
            <p class="text-muted" id="admin-email">admin@email.com</p>
            <div class="pill-container">
              <p class="pill mt-2">ADMIN</p>
            </div>
          </div>

          <nav class="profile-nav">
            <div class="nav-item active" data-target="dashboard-section">
              <i class="fas fa-chart-line me-2"></i> Dashboard
            </div>
            <div class="nav-item" data-target="users-section">
              <i class="fas fa-users me-2"></i> Utenti
            </div>
            <div class="nav-item" data-target="sedi-section">
              <i class="fas fa-building me-2"></i> Sedi
            </div>
            <div class="nav-item" data-target="spazi-section">
              <i class="fas fa-chair me-2"></i> Spazi
            </div>
            <div class="nav-item" data-target="prenotazioni-section">
              <i class="fas fa-calendar-check me-2"></i> Prenotazioni
            </div>
          </nav>
        </div>
      </aside>

      <!-- Main content -->
      <section class="col-lg-9">
        <div class="profile-content-container">

          <!-- DASHBOARD -->
          <div class="content-section active" id="dashboard-section">
            <div class="content-header">
              <h4>Dashboard</h4>
            </div>
            <div class="content-body">
              <div class="row g-3">
                <div class="col-md-4">
                  <div class="kpi-card">
                    <div class="kpi-label">Prenotazioni oggi</div>
                    <div class="kpi-value" id="kpi-pren-today">—</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="kpi-card">
                    <div class="kpi-label">Settimana</div>
                    <div class="kpi-value" id="kpi-pren-week">—</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="kpi-card">
                    <div class="kpi-label">Mese</div>
                    <div class="kpi-value" id="kpi-pren-month">—</div>
                  </div>
                </div>
              </div>

              <div class="row g-3 mt-1">
                <div class="col-md-6">
                  <div class="kpi-card">
                    <div class="kpi-label">Sedi attive</div>
                    <div class="kpi-value" id="kpi-sedi-attive">—</div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="kpi-card">
                    <div class="kpi-label">Gestori attivi</div>
                    <div class="kpi-value" id="kpi-gestori-attivi">—</div>
                  </div>
                </div>
              </div>

              <div class="row g-3 mt-3">
                <div class="col-12">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h6 class="mb-3">Andamento prenotazioni</h6>
                      <canvas id="admin-ordersChart" height="120"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- UTENTI -->
          <div class="content-section" id="users-section" style="display:none;">
            <div class="content-header">
              <h4>Gestione Utenti</h4>
            </div>
            <div class="content-body">
              <div class="table-responsive">
                <table class="table table-striped table-hover" id="tbl-users">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Nome e Cognome</th>
                      <th>Email</th>
                      <th>Ruolo</th>
                      <th>Creato</th>
                      <th class="text-end">Azioni</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="6" class="text-center text-muted">Caricamento...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- SEDI -->
          <div class="content-section" id="sedi-section" style="display:none;">
            <div class="content-header">
              <h4>Gestione Sedi</h4>
            </div>
            <div class="content-body">
              <div class="table-responsive">
                <table class="table table-striped table-hover" id="tbl-sedi">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Nome</th>
                      <th>Indirizzo</th>
                      <th>Stato</th>
                      <th class="text-end">Azioni</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="6" class="text-center text-muted">Caricamento...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- SPAZI -->
          <div class="content-section" id="spazi-section" style="display:none;">
            <div class="content-header">
              <h4>Gestione Spazi</h4>
            </div>
            <div class="content-body">
              <div class="table-responsive">
                <table class="table table-striped table-hover" id="tbl-spazi">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Nome</th>
                      <th>Tipologia</th>
                      <th>Sede</th>
                      <th>Stato</th>
                      <th class="text-end">Azioni</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="6" class="text-center text-muted">Caricamento...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- PRENOTAZIONI -->
          <div class="content-section" id="prenotazioni-section" style="display:none;">
            <div class="content-header">
              <h4>Tutte le Prenotazioni</h4>
            </div>
            <div class="content-body">
              <div class="table-responsive">
                <table class="table table-striped table-hover" id="tbl-pren">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>ID Sede</th>
                      <th>Sede</th>
                      <th>Cliente</th>
                      <th>Stato</th>
                      <th>Totale</th>
                      <th>Data</th>
                      <th class="text-end">Azioni</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="8" class="text-center text-muted">Caricamento...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

        </div>
      </section>
    </div>
  </div>

  <!-- footer -->
  <footer class="bg-dark text-white py-5">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 mb-4 mb-lg-0">
          <h5 class="mb-3 text-uppercase">CoWorkSpace</h5>
          <p>
            La piattaforma che valorizza il coworking in Italia, mettendo in contatto
            professionisti, aziende e creativi alla ricerca di spazi unici dove lavorare e collaborare.
          </p>
          <div class="social-icons mt-3">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-pinterest"></i></a>
          </div>
        </div>
        <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
          <h5 class="mb-3 text-uppercase">Naviga</h5>
          <ul class="list-unstyled">
            <li><a href="index.html" class="text-white-50">Home</a></li>
            <li><a href="sedi.html" class="text-white-50">Sedi</a></li>
            <li><a href="spazi.html" class="text-white-50">Spazi</a></li>
            <li><a href="about.html" class="text-white-50">Chi siamo</a></li>
          </ul>
        </div>
        <div class="col-lg-2 col-md-4 mb-4 mb-md-0">
          <h5 class="mb-3 text-uppercase">Account</h5>
          <ul class="list-unstyled">
            <li><a href="profilo.html" class="text-white-50">Il mio account</a></li>
          </ul>
        </div>
        <div class="col-lg-4 col-md-4">
          <h5 class="mb-3 text-uppercase">Newsletter</h5>
          <p class="text-white-50">Iscriviti per ricevere novità su sedi e servizi</p>
          <div class="input-group mb-3">
            <input type="email" class="form-control" placeholder="La tua email" aria-label="Email">
            <button class="btn btn-primary" type="button">Iscriviti</button>
          </div>
        </div>
      </div>
      <hr class="my-4">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center">
        <p class="mb-md-0">&copy; 2025 CoWorkSpace. Tutti i diritti riservati.</p>
        <div>
          <a href="#" class="text-white-50 me-3">Privacy Policy</a>
          <a href="#" class="text-white-50">Termini di Servizio</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Toast -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1100;">
    <div id="admin-toast" class="toast align-items-center text-white bg-success border-0" role="alert"
      aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">Operazione completata</div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Chiudi"></button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="./scripts/config.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Auth & Navbar -->
  <script src="./scripts/auth.js"></script>
  <script src="./scripts/partials/navbar.js"></script>

  <!-- Admin logic -->
  <script src="./scripts/pages/adminPanel.js"></script>

  <script>
    // switch sezioni
    $(document).on("click", ".profile-nav .nav-item", function (e) {
      e.preventDefault();
      const target = $(this).data("target");
      $(".profile-nav .nav-item").removeClass("active");
      $(this).addClass("active");
      $(".content-section").hide().removeClass("active");
      $("#" + target).show().addClass("active");
      const top = document.querySelector(".profile-container")?.offsetTop || 0;
      window.scrollTo({ top: Math.max(0, top - 10), behavior: "instant" });
    });

    // filtro prenotazioni 
    $("#btn-filter-pren").on("click", function () { return false; });
  </script>
</body>

</html>